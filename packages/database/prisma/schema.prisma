datasource db {
  provider          = "postgresql"
  // localhost database.
  url               = "postgres://postgres:postgres@localhost:5432/postgres"
  shadowDatabaseUrl = "postgres://postgres:postgres@localhost:9432/postgres"
  //! production database
  // url      = env("PRODUCTION_DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model user {
  id                  String           @id @db.Uuid
  email               String           @unique
  project_memberships project_member[]
  created_at          DateTime         @default(now())
}

model project_member {
  project_id String  @db.Uuid
  project    project @relation(fields: [project_id], references: [id], onDelete: Cascade)
  user_id    String  @db.Uuid
  user       user    @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@id([project_id, user_id])
}

model project {
  id                   String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  api_key              String           @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name                 String
  // the user id is required to to insert a membership to the project via a trigger
  // is not @default(dbgenerated("auth.uid()")) because that leads to problems with migrations.
  created_by_user_id   String           @db.Uuid
  members              project_member[]
  source_language_code iso_639_1
  created_at           DateTime         @default(now())
  languages            language[]
}

model language {
  code       iso_639_1
  project_id String    @db.Uuid
  project    project   @relation(fields: [project_id], references: [id], onDelete: Cascade)
  file       String    @default("")

  @@id([project_id, code])
}

enum iso_639_1 {
  ab
  aa
  af
  ak
  sq
  am
  ar
  an
  hy
  as
  av
  ae
  ay
  az
  bm
  ba
  eu
  be
  bn
  bh
  bi
  bs
  br
  bg
  my
  ca
  km
  ch
  ce
  ny
  zh
  cu
  cv
  kw
  co
  cr
  hr
  cs
  da
  dv
  nl
  dz
  en
  eo
  et
  ee
  fo
  fj
  fi
  fr
  ff
  gd
  gl
  lg
  ka
  de
  ki
  el
  kl
  gn
  gu
  ht
  ha
  he
  hz
  hi
  ho
  hu
  is
  io
  ig
  id
  ia
  ie
  iu
  ik
  ga
  it
  ja
  jv
  kn
  kr
  ks
  kk
  rw
  kv
  kg
  ko
  kj
  ku
  ky
  lo
  la
  lv
  lb
  li
  ln
  lt
  lu
  mk
  mg
  ms
  ml
  mt
  gv
  mi
  mr
  mh
  ro
  mn
  na
  nv
  nd
  ng
  ne
  se
  no
  nb
  nn
  ii
  oc
  oj
  or
  om
  os
  pi
  pa
  ps
  fa
  pl
  pt
  qu
  rm
  rn
  ru
  sm
  sg
  sa
  sc
  sr
  sn
  sd
  si
  sk
  sl
  so
  st
  nr
  es
  su
  sw
  ss
  sv
  tl
  ty
  tg
  ta
  tt
  te
  th
  bo
  ti
  to
  ts
  tn
  tr
  tk
  tw
  ug
  uk
  ur
  uz
  ve
  vi
  vo
  wa
  cy
  fy
  wo
  xh
  yi
  yo
  za
  zu
}
